# ============================================================================
# LEVYTHON ADVANCED OOP EXAMPLE
# ============================================================================
# Demonstrates: classes, inheritance, abstract classes, polymorphism
# Run with: ./levython examples/oop_advanced.levy
# ============================================================================

say("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—")
say("â•‘           LEVYTHON ADVANCED OOP EXAMPLE                            â•‘")
say("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")

# -----------------------------------------------------------------------------
# Basic Class
# -----------------------------------------------------------------------------
say("")
say("ğŸ“¦ [Demo 1] Basic Class")
say("   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€")

class Person {
    init(name, age) {
        self.name <- name
        self.age <- age
    }
    
    act greet() {
        -> "Hi, I'm " + self.name + ", age " + str(self.age)
    }
}

person <- Person("Alice", 25)
say("   " + person.greet())

# -----------------------------------------------------------------------------
# Inheritance
# -----------------------------------------------------------------------------
say("")
say("ğŸ”— [Demo 2] Inheritance")
say("   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€")

class Animal {
    init(name) { self.name <- name }
    act speak() { -> "sound" }
}

class Dog is a Animal {
    init(name, breed) {
        self.name <- name
        self.breed <- breed
    }
    act speak() { -> "Woof!" }
    act fetch() { -> self.name + " fetches!" }
}

dog <- Dog("Buddy", "Retriever")
say("   Dog: " + dog.name + " (" + dog.breed + ")")
say("   Says: " + dog.speak())
say("   " + dog.fetch())

# isinstance checks
say("   isinstance(dog, Dog): " + str(isinstance(dog, Dog)))
say("   isinstance(dog, Animal): " + str(isinstance(dog, Animal)))

# -----------------------------------------------------------------------------
# Abstract Classes
# -----------------------------------------------------------------------------
say("")
say("ğŸ“ [Demo 3] Abstract Classes")
say("   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€")

abstract class Shape {
    abstract act area();
    act describe() { -> "Area: " + str(self.area()) }
}

class Rectangle is a Shape {
    init(w, h) { self.w <- w; self.h <- h }
    act area() { -> self.w * self.h }
}

class Circle is a Shape {
    init(r) { self.r <- r }
    act area() { -> 3.14159 * self.r * self.r }
}

rect <- Rectangle(10, 5)
circle <- Circle(7)

say("   Rectangle: " + rect.describe())
say("   Circle: " + circle.describe())

# -----------------------------------------------------------------------------
# Attribute Manipulation
# -----------------------------------------------------------------------------
say("")
say("ğŸ› ï¸  [Demo 4] hasattr/getattr/setattr")
say("   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€")

say("   hasattr(dog, 'breed'): " + str(hasattr(dog, "breed")))
say("   getattr(dog, 'breed'): " + getattr(dog, "breed"))

setattr(dog, "age", 3)
say("   After setattr(dog, 'age', 3):")
say("   getattr(dog, 'age'): " + str(getattr(dog, "age")))

# -----------------------------------------------------------------------------
# Summary
# -----------------------------------------------------------------------------
say("")
say("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—")
say("â•‘  âœ… ADVANCED OOP DEMO COMPLETE                                     â•‘")
say("â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£")
say("â•‘  Features: class, init, self, is a, abstract, isinstance          â•‘")
say("â•‘           hasattr, getattr, setattr                                â•‘")
say("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
